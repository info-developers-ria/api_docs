# Підрахунок середньої ціни

**Для перегляду актуальної документації перейдіть у розділ ["Документація"](https://developers.ria.com/docs/)**

 **Для перегляду актуальної документації перейдіть у розділ ["Документація"](https://developers.ria.com/docs/)**
 
 **“Підрахунок середньої ціни”** — 
 перший сервіс, заснований на актуальних статистичних даних **AUTO.RIA** (щомісяця 10 тисяч опублікованих оголошень про продаж 7 800 марок авто, які щодня збирають 8 мільйонів переглядів).
 
 Тепер ви можете:
 * дізнаватися актуальні середні ціни автомобілів різних марок і моделей; 
 * стежити за змінами цін у коротко- та довгостроковому періодах;
 * аналізувати та прогнозувати зміни цін і попиту на автомобілі;
 * розміщувати отриману інформацію на вашому сайті.
 
 
 
 Ознайомтеся з технічною документацією, щоб отримати доступ і можливість експортувати необхідну інформацію в програму вашої компанії.
 
 
### Формат даних у запиті

Усі параметри, описані в таблиці підтримуваних параметрів, мають передаватися у вигляді чисел. Винятками є тільки параметри - *рік випуску*. *пробіг*, *опції* та *коробка передач*.

Якщо передати масив у параметрі *коробка передач*, то це буде інтерпретуватися як пошук коробок передач із логічним оператором *АБО*. Тобто `https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&marka_id=9&model_id=31612&`
`gear_id=1&gear_id=2` 
- вибере для підрахунку всі **BMW 318** з автоматичними та ручними коробками передач. Аналогічно і з параметром *тип палива*, наприклад: `https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&marka_id=9&model_id=31887&`
`yers=2014&fuel_id=1&fuel_id=2`
- вибере для підрахунку всі **BMW 520 2014 року** з дизельними та бензиновими двигунами.  

Якщо передати масив у параметрі *рік випуску* або *пробіг* це буде інтерпретуватися як діапазон значень. Наприклад, `https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&raceInt=10&raceInt=100` - вибере для підрахунку середньої ціни всі оголошення з пробігом від 10 до 100 тис. км.

Якщо передати масив значень у параметрі *опції*, то це буде інтерпретуватися як пошук опцій із логічним оператором "І". Тобто `https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&options=217&options=463` вибере для підрахунку всі оголошення, у яких є опція *ABS* **І** *Галогенні фари*.

### Формат даних у відповіді

У разі успішного підрахунку середньої ціни за вказаними параметрами результат буде зі статусом **200 OK**.

Приклад успішної відповіді:
```javascript
{
    total: 17,
    arithmeticMean: 16305.882352941177,
    interQuartileMean: 8483.333333333334,
    percentiles: {
        1.0: 1944,
        5.0: 2520,
        25.0: 3500,
        50.0: 8000,
        75.0: 23500,
        95.0: 53539.999999999985,
        99.0: 64868
    },
    prices: [
        67700,
        27000,
        3000,
        23500,
        3500,
        8100,
        10000,
        3500,
        2700,
        8000,
        11000,
        45800,
        50000,
        1800,
        4350,
        4400,
        2850
    ],
    classifieds: [
        14663610,
        14226353,
        14138132,
        13969588,
        14697569,
        13386778,
        13279188,
        14555863,
        14754932,
        14816842,
        14664706,
        13873344,
        14681607,
        14772056,
        14059841,
        14290096,
        14890250
    ]
}
```
Розшифрування параметрів:
- *total* - загальна кількість оголошень, що беруть участь у підрахунку.
- *arithmeticMean* - [середнє арифметичне](https://ru.wikipedia.org/wiki/%D0%A1%D1%80%D0%B5%D0%B4%D0%BD%D0%B5%D0%B5_%D0%B0%D1%80%D0%B8%D1%84%D0%BC%D0%B5%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5).
- *interQuartileMean* - середнє арифметичне зі значень, що знаходяться між першим і четвертим [квантилем](https://ru.wikipedia.org/wiki/%D0%9A%D0%B2%D0%B0%D0%BD%D1%82%D0%B8%D0%BB%D1%8C). Умовно кажучи, це середнє арифметичне без урахування 25% найменших і найбільших значень.
- *percentiles* - значення [процентилів](https://ru.wikipedia.org/wiki/%D0%9A%D0%B2%D0%B0%D0%BD%D1%82%D0%B8%D0%BB%D1%8C#.D0.9F.D0.B5.D1.80.D1.86.D0.B5.D0.BD.D1.82.D0.B8.D0.BB.D1.8C). Тобто для цього прикладу 25% усіх оголошень мають ціну нижче $3500.
- *prices* - список цін, які брали участь у підрахунку середньої ціни. Розмір обмежений 1000 елементів.
- *classifieds* - ідентифікатори оголошень, до яких належать ціни відповідно. Розмір обмежений 1000 елементів.

Записи в поля "classifields" та "prices" йдуть в однаковому порядку.

Якщо з якихось причин не вдалося підрахувати середню ціну, відповідь матиме статус **400 Bad Request**, а тіло відповіді міститиме наступне:
```javascript
{ "message": "Not Enough Data" }
```

### Приклади

Середня ціна по BMW X5 з пробігом від 10 до 100 тис. км. - [https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&marka_id=9&model_id=96&raceInt=10&raceInt=100](https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEYd&marka_id=9&model_id=96&raceInt=10&raceInt=100).


Середня ціна для Honda Accord у Києві - [https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&marka_id=28&model_id=262&city_id=9](https://developers.ria.com/auto/average_price?api_key=YOUR_API_KEY&marka_id=28&model_id=262&city_id=9)
 
